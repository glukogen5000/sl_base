{% extends 'sl_main/header.html' %}
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
{% block content %}
<div class="  text-center bg-light">
    <form method="get">
        <div class="container-fluid">
            <div class="row">


                <div class="col-md-2">
                    <p>{{myFilter.form.mrf.label}}<br>{{myFilter.form.mrf}}</p>
                    <p>{{myFilter.form.rf.label}}<br>{{myFilter.form.rf}}</p>
                    <p>{{myFilter.form.subjectRF.label}} <br>{{myFilter.form.subjectRF}}</p>
                </div>
                <div class="col-md-2">
                    <p>{{myFilter.form.address.label}}<br>{{myFilter.form.address}}</p>
                    <p>{{myFilter.form.num_access_link.label}}<br>{{myFilter.form.num_access_link}}</p>
                    <p>{{myFilter.form.contractor.label}}<br>{{myFilter.form.contractor}}</p>
                </div>
                <div class="col-md-2">
                    <p>{{myFilter.form.plan_data_ready_smr.label}}<br>{{myFilter.form.plan_data_ready_smr}}</p>
                    <p>{{myFilter.form.access.label}}<br>{{myFilter.form.access}}</p>
                    <p>{{myFilter.form.date_access_SMR.label}}<br>{{myFilter.form.date_access_SMR}}</p>
                </div>
                <div class="col-md-2">
                    <p>{{myFilter.form.obemy_podany.label}}<br>{{myFilter.form.obemy_podany}}</p>
                    <p>{{myFilter.form.foto_montaj_upload.label}}<br>{{myFilter.form.foto_montaj_upload}}</p>
                    <p>{{myFilter.form.smr_ready.label}}<br>{{myFilter.form.smr_ready}}</p>
                </div>
                <div class="col-md-2">
                    <p>{{myFilter.form.data_priemki_rtk.label}}<br>{{myFilter.form.data_priemki_rtk}}</p>
                    <p>{{myFilter.form.act_ready.label}}<br>{{myFilter.form.act_ready}}</p>
                    <p>{{myFilter.form.rtk_ready.label}}<br>{{myFilter.form.rtk_ready}}</p>
                </div>
                <div class="col-md-2">
                    <p>{{myFilter.form.id_ready.label}}<br>{{myFilter.form.id_ready}}</p>
                    <p>{{myFilter.form.data_ready_from_dogovor.label}}<br>{{myFilter.form.data_ready_from_dogovor}}</p>
                    <p>{{myFilter.form.komentariy.label}}<br>{{myFilter.form.komentariy}}</p>
                </div>


                <div class="container-fluid">
                    <a href="{%url 'list_object' %}" class="btn btn-secondary " role="button" aria-pressed="true">Очистить
                        фильтр</a>
                    <button class="btn btn-secondary" type="submit">Поиск</button>
                </div>

            </div>
        </div>
    </form>

</div>
<div class="table-responsive">
    <table id="table_id" class="table table-hover table-bordered table-sm">
        <thead class="thead-dark">
        <tr>

            <th class="align-middle text-center">МРФ</th>
            <th class="align-middle text-center">РФ</th>
            <th class="align-middle text-center">Субъект РФ</th>
            <th class="align-middle text-center">Адрес</th>
            <th class="align-middle text-center">Кол-во узлов доступа и связи</th>
            <th class="align-middle text-center">Подрядчик</th>
            <th class="align-middle text-center">Плановая дата завершение СМР</th>
            <th class="align-middle text-center">Допуск получен</th>
            <th class="align-middle text-center">Фактическая дата получения согласований/допуска на СМР</th>
            <th class="align-middle text-center">Объемы поданы</th>
            <th class="align-middle text-center">Фото СМР + схемы для ИД приложены</th>
            <th class="align-middle text-center">СМР выполнены</th>
            <th class="align-middle text-center">Дата приемки РТК</th>
            <th class="align-middle text-center">Акт приемки</th>
            <th class="align-middle text-center">Приемка РТК проведена</th>
            <th class="align-middle text-center">ИД передана</th>
            <th class="align-middle text-center">Срок завершения работ по договору</th>
            <th class="align-middle text-center">Комментарии</th>
        </tr>
        </thead>
        <tbody>

        {% for item in item_project %}
        <tr onclick="window.location.assign('{%url 'object' item.id %}');">
            <td>{{ item.mrf }}</td>
            <td>{{item.rf}}</td>
            <td>{{item.subjectRF}}</td>
            <td>{{item.address}}</td>
            <td>{{item.num_access_link}}</td>
            <td>{{item.contractor.name}}</td>
            <td>{{item.plan_data_ready_smr|date:"d/m/Y"}}</td>

            {%if item.access == "Да" %}
            <td class="table-success">{{item.access}}</td>
            {%else%}
            <td class="table-danger">{{item.access}}</td>
            {%endif%}

            <td>{{item.date_access_SMR|date:"d/m/Y"}}</td>

            {%if item.obemy_podany == "Да" %}
            <td class="table-success">{{item.obemy_podany}}</td>
            {%else%}
            <td class="table-danger">{{item.obemy_podany}}</td>
            {%endif%}

            {%if item.foto_montaj_upload == "Да" or item.foto_montaj_upload == "Загружен"%}
            <td class="table-success">{{item.foto_montaj_upload}}</td>
            {%else%}
            <td class="table-danger">{{item.foto_montaj_upload}}</td>
            {%endif%}


            {%if item.smr_ready == "Да" %}
            <td class="table-success">{{item.smr_ready}}</td>
            {%else%}
            <td class="table-danger">{{item.smr_ready}}</td>
            {%endif%}

            <td>{{item.data_priemki_rtk|date:"d/m/Y"}}</td>

            {%if item.act_ready == "Да" or item.act_ready == "Загружен" %}
            <td class="table-success">{{item.act_ready}}</td>
            {%else%}
            <td class="table-danger">{{item.act_ready}}</td>
            {%endif%}

            {%if item.rtk_ready == "Да" %}
            <td class="table-success">{{item.rtk_ready}}</td>
            {%else%}
            <td class="table-danger">{{item.rtk_ready}}</td>
            {%endif%}

            {%if item.id_ready == "Да" or item.id_ready == "Загружен" %}
            <td class="table-success">{{item.id_ready}}</td>
            {%else%}
            <td class="table-danger">{{item.id_ready}}</td>
            {%endif%}


            <td>{{item.data_ready_from_dogovor|date:"d/m/Y"}}</td>
            <td>{{item.komentariy}}</td>

        </tr>


        {% endfor %}
        </tbody>
    </table>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.18/af-2.3.0/b-1.5.2/b-colvis-1.5.2/b-flash-1.5.2/b-html5-1.5.2/b-print-1.5.2/cr-1.5.0/fh-3.1.4/r-2.2.2/datatables.min.css"/>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript"
            src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.18/af-2.3.0/b-1.5.2/b-colvis-1.5.2/b-flash-1.5.2/b-html5-1.5.2/b-print-1.5.2/cr-1.5.0/fh-3.1.4/r-2.2.2/datatables.min.js"></script>
    <!-- needed to use moment.js for our date sorting-->
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
    <script type="text/javascript"
            src="https://cdn.datatables.net/plug-ins/1.10.19/sorting/datetime-moment.js"></script>


    <!-- the second way to do it to integrate our buttons for export-->

    <script>
    $(document).ready( function () {

    $.fn.dataTable.ext.errMode = 'throw';


    $.fn.dataTable.moment('DD/MM/YYYY');

    $('#table_id').DataTable({
    "paging":   false,
    "searching":   false,
    "scrollX": true,
    dom: 'B<"clear">lfrtip',
    buttons: {
        name: 'primary',
        buttons: [  'csv', 'excel', ]

        }}
    );
} );








    </script>
</div>
{%endblock %}
<!--    <tr class="table-active"></tr>-->
<!--    <tr class="table-success"></tr>-->
<!--    <tr class="table-warning"></tr>-->
<!--    <tr class="table-danger"></tr>-->